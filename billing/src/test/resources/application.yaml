# Test Configuration for Billing Service
quarkus:
  # Disable CDI for unit tests to avoid dependency issues
  arc:
    dev-mode-health-check-enabled: false
    health-validation-enabled: false

  datasource:
    db-kind: h2
    jdbc:
      url: jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
      driver: org.h2.Driver
      username: sa
      password:
    reactive:
      url: jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
      max-size: 5

  hibernate-orm:
    database:
      generation: create-drop
    log:
      sql: false

  # Disable external services for unit tests
  redis:
    hosts: redis://localhost:6379
    password:

# Test profile configuration
%test:
  quarkus:
    arc:
      dev-mode-health-check-enabled: false
      health-validation-enabled: false
    datasource:
      db-kind: h2
      jdbc:
        url: jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
        driver: org.h2.Driver
        username: sa
        password:
      reactive:
        url: jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
        max-size: 5

    hibernate-orm:
      database:
        generation: create-drop
      log:
        sql: false