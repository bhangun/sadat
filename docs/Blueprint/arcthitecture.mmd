
flowchart LR  
  %% \=============================  
  %% UI & Developer Tooling  
  %% \=============================  
  subgraph UI\[Low-Code UI & Developer Tools]
    direction TB  
    Editor\[Editor & Canvas]
    Debugger\[Debugger & Reasoning Visualizer]
    Linter\[Workflow Linter / Optimizer]
    NodeAuthor\[Agent-assisted Node Authoring]
    WSClient\[WebSocket Client]
    CodeGenUI\[CodeGen Settings & Export Panel]
    BIConsole\[Analytics / BI Console]
    HumanPortal\[Human-in-the-loop Console]
  end

  %% \=============================  
  %% API / Gateway Layer  
  %% \=============================  
  subgraph Gateway[API Gateway & Auth]
    direction TB  
    APIGW[API Gateway rate-limit, TLS]
    Auth[AuthN/AuthZ SmallRye-JWT, RBAC]
    Audit[Audit & Provenance Collector]
    AccessPolicy[Access Policy Manager ABAC / RBAC]
  end

  %% \=============================  
  %% Core Quarkus Services (microservices)  
  %% \=============================  
  subgraph Core[Quarkus Platform â€” Core Services]
    direction TB

    %% Designer & CodeGen  
    Designer[Designer Service CRUD \+ Validation]
    SchemaReg[Node Schema Registry]
    VersionSvc[Versioning Service]
    PluginMgr[Plugin Manager hot-reload, signed artifacts]
    CodeGen[Agent Code/Runtime Generator PAC]
    TemplateLib[Code Templates & Runtime SDK]
    BuildSvc[Build/Compile Service Maven/Gradle/Docker/Native]

    %% Reasoning & Orchestration Brain  
    Planner[Planning Engine task decomposition]
    Orchestrator[Orchestrator Adaptive Orchestration]
    Decomposer[Decomposer Taskifier]
    Reasoner[Reasoner Scratchpad Engine]
    Coordinator[Coordinator Workflow Engine]
    StateMgr[State Manager Global State]

    %% Evaluation / Quality / Optimization  
    Critic[Critic Evaluator Service]
    Evaluator[Evaluator Node LLM-as-judge rules]
    Optimizer[Runtime Optimizer Auto-tuner]
    SelfRefine[Self-Refinement Agent]

    %% Tools, Guardrails & Execution  
    RuntimeHub[Runtime Hub schedules & executors]
    NodeExecutor[Node Executor sandbox sidecar]
    ToolReasoner[Tool Reasoner]
    ToolGateway[Secure Tool Gateway]
    ToolExecutor[Tool Executor API Integrator]
    Guardrails[Guardrails Engine CEL OPA]
    ValidatorSvc[Validator Node Service schema/type]
    EnricherSvc[Enricher / Metadata Service]
    SyncSvc[Data Sync & Ingestion Service]
    DecisionSvc[Decision / Rule Engine CEL]

    %% Memory, RAG, KG, Multimodal  
    MemorySvc[Memory Service episodic/semantic/procedural]
    MemoryScorer[Memory Scorer]
    RAGsvc[RAG Service pgvector / VectorDB adapter]
    KG[Knowledge Graph Service]
    KnowledgeSynth[Knowledge Synthesizer]
    KnowledgeRouter[Knowledge Router multi-RAG]
    Multimodal[Multimodal Inference Service Vision/Audio/OCR]

    %% Model & Inference management  
    ModelRouter[Model Router & Router Policy]
    ModelEvaluator[Model Evaluator / A/B]
    VersionMgr[Model Version Manager]
    InferenceOpt[Inference Optimizer cache/batch/quant]

    %% Analytics, Telemetry & Feedback  
    MetricsCollector[Metrics Collector]
    Analytics[Real-Time Analytics Engine]
    FeedbackMgr[Feedback Loop Manager]
    TraceCollector[Trace & Telemetry Collector OTel]
    BIEngine[BI / KPI Engine]

    %% Governance, Security & Compliance  
    PolicyEngine[Policy Engine CEL Rego]
    EthicsAgent[Ethics / Compliance Agent]
    SecretMgr[Secrets Manager Vault]
    EncryptionSvc[Encryption / Tokenization Service]
    Provenance[Provenance & Lineage Store]

    %% Reliability & Ops  
    FallbackAgent[Fallback Agent]
    RetryManager[Retry/Timeout Manager]
    CircuitBreaker[Circuit Breaker]
    ChaosSim[Chaos / Resilience Simulator]
    Scheduler[Resource Scheduler]

    %% Multi-Agent management  
    AgentRouter[Agent Router / Selector]
    AgentNegotiator[Agent Negotiator]
    AgentSupervisor[Agent Supervisor]
    ReflectionAgent[Reflection / Meta-cognition Agent]

    %% Human-in-the-loop  
    HITL[Human-in-the-loop Manager]
    Escalation[Escalation / Human Ops]
    Labeling[Labeling & Annotation Service]

    %% DevOps / CI  
    CI[CI/CD & Artifact Repo Nexus/Artifactory]
    ArtifactRepo[Artifact Repository]
    PluginScanner[Static Scanner / SCA]
  end

  %% \=============================  
  %% Standalone Runtime Output (Portable Agents)  
  %% \=============================  
  subgraph Standalone[Standalone & Portable Agents]
    direction TB  
    GeneratedAgent[Generated Agent App JAR / Native / Docker / WASM]
    AgentSDK[Embedded Agent Runtime SDK tiny]
    LocalAdapters[Local Adapters Local RAG, Local Model]
    LocalTelemetry[Light Observability Client]
  end

  %% \=============================  
  %% External Systems / Infra  
  %% \=============================  
  subgraph Infra[External Systems & Infra]
    direction TB  
    Postgres[Postgres \+ pgvector]
    ObjectStore[S3 / Blob Store]
    VectorDB[Milvus/Weaviate optional]
    LLMs[LLM Providers Ollama/Triton/OpenAI/vLLM]
    Tools[Third-party APIs / Tools]
    Vault[Secrets Manager Vault]
    K8s[Kubernetes containers, jobs]
    TimeSeries[Time-series DB Prometheus/ClickHouse]
    Tracing[Tracing Jaeger/Tempo]
  end

  %% \=============================  
  %% Connections  
  %% \=============================

  %% UI \<\> Gateway  
  Editor -->|REST / GraphQL| APIGW  
  WSClient -->|WS| APIGW  
  CodeGenUI --> APIGW  
  BIConsole --> APIGW  
  HumanPortal --> APIGW

  %% Gateway \<\> Core  
  APIGW --> Auth  
  APIGW --> Designer  
  APIGW --> Debugger  
  APIGW --> Linter  
  APIGW --> NodeAuthor  
  APIGW --> CodeGen  
  APIGW --> BIEngine  
  APIGW --> HumanPortal  
  APIGW --> AccessPolicy

  %% Designer & Schema & Plugins  
  Designer --> SchemaReg  
  Designer --> VersionSvc  
  Designer --> PluginMgr  
  PluginMgr --> PluginScanner  
  PluginScanner --> Governance[Governance/Approval]
  Governance --> Loader[Loader]
  PluginMgr --> CI  
  CI --> ArtifactRepo

  %% CodeGen Flow  
  Designer --> CodeGen  
  SchemaReg --> CodeGen  
  VersionSvc --> CodeGen  
  PluginMgr --> CodeGen  
  CodeGen --> TemplateLib  
  TemplateLib --> BuildSvc  
  BuildSvc --> ArtifactRepo  
  BuildSvc --> GeneratedAgent  
  GeneratedAgent --> AgentSDK  
  AgentSDK --> LocalAdapters

  %% Orchestration & Planning  
  Planner --> Decomposer  
  Decomposer --> Orchestrator  
  Orchestrator --> Coordinator  
  Orchestrator --> Scheduler  
  Orchestrator --> EventBus[Event Bus Kafka]
  EventBus --> Orchestrator

  %% Reasoning & State  
  Planner --> Reasoner  
  Reasoner --> StateMgr  
  StateMgr --> MemorySvc  
  StateMgr --> RAGsvc

  %% Runtime \<\> Executors  
  Scheduler --> RuntimeHub  
  RuntimeHub --> NodeExecutor  
  RuntimeHub --> StreamingRT[Streaming Execution Layer]
  NodeExecutor -->|pre-check| Guardrails  
  StreamingRT --> Guardrails

  %% Node execution & tooling  
  NodeExecutor --> ToolReasoner  
  ToolReasoner --> ToolGateway  
  ToolGateway --> ToolExecutor  
  ToolExecutor --> Tools  
  NodeExecutor --> RAGsvc  
  NodeExecutor --> MemorySvc  
  NodeExecutor --> Multimodal  
  NodeExecutor --> ModelRouter  
  ModelRouter --> LLMs

  %% Evaluator / Critic / Optimizer loops  
  NodeExecutor --> Evaluator  
  Evaluator --> Critic  
  Critic --> Optimizer  
  Optimizer --> Planner  
  SelfRefine --> Planner

  %% Knowledge & data stores  
  RAGsvc --> Postgres  
  RAGsvc --> VectorDB  
  MemorySvc --> Postgres  
  KG --> Postgres  
  KnowledgeSynth --> RAGsvc  
  KnowledgeRouter --> RAGsvc  
  Provenance --> Postgres  
  Designer --> Postgres  
  VersionSvc --> Postgres  
  ObjectStore --> NodeExecutor  
  SecretMgr --> ToolGateway  
  SecretMgr --> ModelRouter

  %% Analytics & Feedback  
  MetricsCollector --> Analytics  
  Analytics --> TimeSeries  
  Analytics --> BIEngine  
  TraceCollector --> Tracing  
  FeedbackMgr --> Evaluator  
  FeedbackMgr --> ModelEvaluator  
  BIEngine --> Optimizer

  %% Governance & Compliance  
  PolicyEngine --> Guardrails  
  PolicyEngine --> AccessPolicy  
  EthicsAgent --> PolicyEngine  
  EncryptionSvc --> Provenance

  %% Reliability & Ops  
  NodeExecutor --> FallbackAgent  
  NodeExecutor --> RetryManager  
  ToolGateway --> CircuitBreaker  
  ChaosSim --> RuntimeHub  
  Scheduler --> K8s

  %% Agent management  
  AgentRouter --> Orchestrator  
  AgentNegotiator --> AgentRouter  
  AgentSupervisor --> AgentRouter  
  ReflectionAgent --> AgentSupervisor

  %% Human-in-the-loop  
  HITL --> HumanPortal  
  HITL --> Orchestrator  
  Escalation --> HumanPortal  
  Labeling --> CI

  %% Observability & Audit  
  Analytics --> Observability[OTel \+ Prometheus \+ Grafana]
  Observability --> Orchestrator  
  Observability --> NodeExecutor  
  Audit --> Provenance  
  Provenance --> ExplainSvc[Explainability Engine]
  ExplainSvc --> Debugger  
  ExplainSvc --> HumanPortal

  %% Plugin manager loads to runtime  
  PluginMgr --> NodeExecutor  
  PluginMgr --> Designer  
  PluginMgr --> Orchestrator

  %% Standalone runtime telemetry & sync  
  GeneratedAgent --> LocalTelemetry  
  LocalTelemetry --> Analytics  
  GeneratedAgent --> LocalAdapters  
  LocalAdapters --> RAGsvc  
  LocalAdapters --> ModelRouter

  %% CI / Artifacts  
  ArtifactRepo --> PluginMgr  
  ArtifactRepo --> CodeGen  
  CI --> PluginMgr  
  CI --> APIGW

